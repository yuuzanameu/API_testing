meta {
  name: coordinator results
  type: http
  seq: 4
}

post {
  url: {{URL}}/api/v1/api-testing/coordinator-results
  body: json
  auth: inherit
}

body:json {
  {
      "user_id": 99,
      "collection_id": 15,
      "api_id": 1697,
      "expected_code": "200",
      "received_code": "200",
      "status": "passed",
      "result": "Test passed successfully. The POST request to endpoint 1697 (https://petstore.swagger.io/v2/pet) returned the expected status code 200. All dependency endpoints executed correctly, and the main test case validation passed as expected."
  }
}

settings {
  encodeUrl: true
}

example {
  name: coordinator results
  
  request: {
    url: {{URL}}/api/v1/api-testing/coordinator-results
    method: POST
    mode: json
    body:json: {
      {
          "user_id": 99,
          "collection_id": 3,
          "api_id": 16,
          "expected_code": "200",
          "received_code": "401",
          "status": "failed",
          "result": ":x: Test failed. The GET request to endpoint 2 (https://qa-automator-staging.letest.ai/api/v1/profile) returned status code 401, but expected 200. Authentication failed - the API rejected the credentials or token. Verify authentication credentials and ensure tokens are valid and not expired."
      }
    }
  }
  
  response: {
    headers: {
      Server: nginx
      Date: Mon, 24 Nov 2025 09:03:29 GMT
      Content-Type: application/json; charset=utf-8
      Content-Length: 69
      Connection: keep-alive
      Content-Security-Policy: default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests
      Cross-Origin-Opener-Policy: same-origin
      Cross-Origin-Resource-Policy: same-origin
      Origin-Agent-Cluster: ?1
      Referrer-Policy: no-referrer
      Strict-Transport-Security: max-age=31536000; includeSubDomains
      X-Content-Type-Options: nosniff
      X-DNS-Prefetch-Control: off
      X-Download-Options: noopen
      X-Frame-Options: SAMEORIGIN
      X-Permitted-Cross-Domain-Policies: none
      X-XSS-Protection: 0
      Access-Control-Allow-Origin: *
      ETag: W/"45-RmQcz4A65n3DIPX5WwTiPDHJVAY"
    }
  
    status: {
      code: OK
      text: 200
    }
  
    body: {
      type: json
      content: '''
        {
            "success": true,
            "message": "coordinator results recorded",
            "data": true
        }
      '''
    }
  }
}
